

# 零、前言

大数据、物联网、人工智能成为近年来最热门的科技流行语。尽管有许多不同的术语用于定义这些技术，但共同的概念是它们都是由数据驱动的。仅仅有数据是不够的；能够释放其价值至关重要。因此，数据科学家开始关注如何从原始数据中获得洞察力。

数据科学已经成为学术和行业团体中最受欢迎的主题之一。然而，由于数据科学是一个非常广泛的学科，学习如何掌握它可能具有挑战性。初学者必须学会如何准备、处理、汇总和可视化数据。更高级的技术包括机器学习，挖掘各种数据格式(文本、图像和视频)，最重要的是，使用数据产生商业价值。数据科学家的角色极具挑战性，需要付出巨大的努力。成功的数据科学家需要有用的工具来帮助解决日常问题。

在这个领域，数据科学家使用最广泛的工具是 R 语言，它是开源和免费的。作为一种机器语言，它提供了许多数据处理、学习包和可视化功能，允许用户动态分析数据。r 帮助用户快速执行分析，并对其数据集执行机器学习算法，而无需了解复杂数学模型的每个细节。

*R for Data Science Cookbook* 采用实用的方法，教您如何使用 R 将数据科学付诸实践。这本书有 12 章，每一章都是通过将主题分解成几个简单的配方来介绍的。通过每个食谱中的一步一步的指导，你可以通过使用 r 中的各种包来应用你从书中学到的东西。

本书的第一部分讲述了如何创建 R 函数来避免不必要的代码重复。您将学习如何使用 R 包为异构数据源准备、处理和执行复杂的 ETL 操作。提供了一个数据操作的例子，说明了如何使用`dplyr`和`data.table`包来有效地处理更大的数据结构，同时有一节重点介绍了`ggplot2`，它涵盖了如何为数据探索创建高级图形。此外，您将学习如何使用`ggvis`包构建一个交互式报告。

这本书还解释了如何使用数据挖掘来发现经常一起购买的物品。后面的章节提供了对金融数据的时间序列分析的见解，同时还有关于机器学习热门话题的详细信息，包括数据分类、回归、聚类和降维。

有了数据科学食谱的 *R 在手，我可以向你保证，你会发现数据科学从未如此简单。*

# 这本书涵盖了什么

[第 1 章](ch01.html "Chapter 1. Functions in R")，R 中的*函数，描述了如何创建 R 函数。本章涵盖了 R 函数的基本组成、环境和参数匹配。此外，我们将探讨一些高级主题，如闭包、函数式编程以及如何正确处理错误。*

[第 2 章](ch02.html "Chapter 2. Data Extracting, Transforming, and Loading")、*数据提取、转换和加载*，教你如何用 r 读取结构化和非结构化数据。本章从从文本文件中收集数据开始。随后，我们将看看如何将 R 连接到数据库。最后，您将学习如何编写一个 web scraper 来从网页或社交媒体站点中抓取非结构化数据。

[第 3 章](ch03.html "Chapter 3. Data Preprocessing and Preparation")、*数据预处理和准备*，向您介绍为分析准备数据。在本章中，我们将用一些基本的 R 函数介绍数据预处理步骤，如类型转换、添加、过滤、删除、合并、整形和缺失值插补。

[第 4 章](ch04.html "Chapter 4. Data Manipulation")、*数据操作*，演示了如何用高级 R 包`data.table`和`dplyr`以高效且有效的方式操作数据。`data.table`包向你展示了快速加载和聚集大量数据的可能性。`dplyr`包提供了用类似 SQL 的语法操作数据的能力。

[第五章](ch05.html "Chapter 5. Visualizing Data with ggplot2")，*用 ggplot2* 可视化数据，探索用`ggplot2`可视化数据。本章首先介绍`ggplot2`的基本构建模块。接下来，我们将讨论如何用`ggplot2`函数创建更复杂的图形的高级主题。最后，我们将描述如何用`ggmap`构建地图。

[第 6 章](ch06.html "Chapter 6. Making Interactive Reports")，*制作交互式报告*，揭示了如何用 R 创建专业报告。在开始，本章讨论了如何编写 R markdown 语法和嵌入 R 代码块。我们还将探索如何使用`ggvis`向报告添加交互式图表。最后，我们将看看如何创建和发布一个 R 闪亮的报告。

[第 7 章](ch07.html "Chapter 7. Simulation from Probability Distributions")，*来自概率分布的模拟*，从强调来自不同概率分布的采样数据开始。作为一个具体的例子，我们将看看如何模拟一个概率函数的随机交易过程。

[第八章](ch08.html "Chapter 8. Statistical Inference in R")，*R*中的统计推断，以点估计和置信区间的讨论开始。随后，将向您介绍参数和非参数测试方法。最后，我们将看看如何使用方差分析来分析一个工程师的工资基础是否因其职位和工作地点而不同。

[第 9 章](ch09.html "Chapter 9. Rule and Pattern Mining with R")，*R*规则和模式挖掘，向您展示用于从交易数据中发现关联项目和潜在频率模式的常用方法。在这一章中，我们使用真实世界的博客作为示例数据，以便您可以学习如何对真实世界的数据执行规则和模式挖掘。

[第 10 章](ch10.html "Chapter 10. Time Series Mining with R")，*R*时间序列挖掘，首先向您介绍从金融数据集中创建和操作时间序列。随后，我们将学习如何用霍尔特温特斯和 ARIMA 预测时间序列。作为一个更具体的例子，本章揭示了如何用 ARIMA 预测股票价格。

[第 11 章](ch11.html "Chapter 11. Supervised Machine Learning")，*监督机器学习*，教你如何建立一个基于标记的训练数据进行预测的模型。您将学习如何使用回归模型来理解数字关系，并将拟合模型应用于数据以进行连续值预测。对于分类，您将学习如何将数据放入基于树的分类器中。

[第十二章](ch12.html "Chapter 12. Unsupervised Machine Learning")、*无监督机器学习*，向你介绍揭示未标记数据的隐藏结构。首先，我们将看看如何使用聚类方法将位置相似的酒店分组在一起。随后，我们将学习如何使用 PCA 在经济自由度数据集上选择和提取特征。



# 这本书你需要什么

要学习书中的例子，你需要一台能访问互联网并能安装 R 环境的计算机。可以从[http://www.cran.r-project.org/](http://www.cran.r-project.org/)下载 R。第一章提供了详细的安装说明。

本书中提供的例子是用微软 Windows 上的 R 版本 3.2.4 编码和测试的。这些例子可能适用于安装在 Mac OS X 或类 Unix 操作系统上的任何最新版本的 R。



# 这本书是给谁的

*R for Data Science Cookbook* 面向那些已经熟悉 R 的基本操作，但希望学习如何使用实用的 R 包高效和有效地分析现实世界的数据问题的人。



# 断面

在这本书里，你会发现几个经常出现的标题(准备，如何做，如何工作，还有更多，另请参阅)。

为了给出如何完成配方的明确说明，我们使用以下章节:

## 准备就绪

本节将告诉您制作方法的内容，并描述如何设置制作方法所需的任何软件或任何初步设置。

## 怎么做……

本节包含遵循配方所需的步骤。

## 它是如何工作的……

这一部分通常包括对前一部分发生的事情的详细解释。

## 还有更多……

这一节包含了关于配方的附加信息，以使读者对配方有更多的了解。

## 参见

这个部分提供了一些有用的链接，可以链接到食谱的其他有用信息。



# 习俗

在这本书里，你会发现许多区分不同类型信息的文本风格。以下是这些风格的一些例子，并解释了它们的含义。

包和函数名如下所示:“然后您可以安装和加载包`RCurl`。”

代码块设置如下:

```

> install.packages("RCurl")

> library(RCurl)

```

任何 URL 都按如下方式编写:

[http://data.worldbank.org/topic/economy-and-growth](http://data.worldbank.org/topic/economy-and-growth)

**变量名**、**自变量名**、**新术语**和**重要词语**以粗体显示。您在屏幕上看到的文字，例如在菜单或对话框中看到的文字，会出现在文本中，如下所示:“在 R 中，缺少的值用符号 **NA(不可用)**表示，不可能的值是 **NaN(不是数字)**。”



# 读者反馈

我们随时欢迎读者的反馈。让我们知道你对这本书的看法——你喜欢或不喜欢什么。读者的反馈对我们来说很重要，因为它有助于我们开发出真正让你受益匪浅的图书。

要给我们发送总体反馈，只需发送电子邮件`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并在邮件主题中提及书名。

如果有一个你擅长的主题，并且你有兴趣写一本书或者为一本书投稿，请查看我们在[www.packtpub.com/authors](http://www.packtpub.com/authors)的作者指南。



# 客户支持

既然您已经是 Packt book 的骄傲拥有者，我们有许多东西可以帮助您从购买中获得最大收益。

## 下载示例代码

你可以从你在[http://www.packtpub.com](http://www.packtpub.com)的账户下载本书的示例代码文件。如果你在其他地方购买了这本书，你可以访问 http://www.packtpub.com/support 的[并注册，让文件直接通过电子邮件发送给你。](http://www.packtpub.com/support)

您可以按照以下步骤下载代码文件:

1.  使用您的电子邮件地址和密码登录或注册我们的网站。
2.  将鼠标指针悬停在顶部的**支持**选项卡上。
3.  点击**代码下载&勘误表**。
4.  在**搜索**框中输入书名。
5.  选择您要下载代码文件的书。
6.  从下拉菜单中选择您购买这本书的地方。
7.  点击**代码下载**。

下载文件后，请确保使用最新版本的解压缩或解压文件夹:

*   WinRAR / 7-Zip for Windows
*   适用于 Mac 的 Zipeg / iZip / UnRarX
*   用于 Linux 的 7-Zip / PeaZip

该书的代码包也托管在 GitHub 的 https://GitHub . com/packt publishing/R-for-Data-Science-Cookbook 上。我们在 https://github.com/PacktPublishing/的[也有来自我们丰富的书籍和视频目录的其他代码包。看看他们！](https://github.com/PacktPublishing/)

## 下载这本书的彩色图片

我们还为您提供了一个 PDF 文件，其中包含本书中使用的截图/图表的彩色图像。彩色图像将帮助您更好地理解输出中的变化。你可以从[https://www . packtpub . com/sites/default/files/downloads/rfordatacaciencookbook _ color images . pdf](https://www.packtpub.com/sites/default/files/downloads/RforDataScienceCookbook_ColorImages.pdf)下载这个文件。

## 勘误表

尽管我们已尽一切努力确保内容的准确性，但错误还是会发生。如果您在我们的某本书中发现了错误——可能是文本或代码中的错误——如果您能向我们报告，我们将不胜感激。这样做，你可以让其他读者免受挫折，并帮助我们改进本书的后续版本。如果您发现任何勘误表，请通过访问[http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的图书，点击**勘误表提交表**链接，并输入您的勘误表的详细信息。一旦您的勘误表得到验证，您的提交将被接受，该勘误表将被上传到我们的网站或添加到该标题的勘误表部分下的任何现有勘误表列表中。

要查看之前提交的勘误表，请前往[https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)并在搜索栏中输入图书名称。所需信息将出现在**勘误表**部分。

## 盗版

互联网上版权材料的盗版是所有媒体都存在的问题。在 Packt，我们非常重视版权和许可证的保护。如果您在互联网上发现我们作品的任何形式的非法拷贝，请立即向我们提供地址或网站名称，以便我们采取补救措施。

请通过`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`联系我们，并提供可疑盗版材料的链接。

我们感谢您帮助保护我们的作者，以及我们为您带来有价值内容的能力。

## 问题

如果您对本书的任何方面有问题，可以通过`<[questions@packtpub.com](mailto:questions@packtpub.com)>`联系我们，我们将尽最大努力解决问题。